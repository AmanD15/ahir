// a simple example illustrating the use of
// pipes to force synchronization of operations
// through data flow.
$module [sum_mod]
    $in (a $uint<10> b $uint<10> c $uint<10> d $uint<10>)
    $out (result $uint<10>)
$is
{
	$pipe ex1 $uint<10>
	$pipe ex2 $uint<10>
	$parallelblock[p] {
		$call add (c d) (ex1)
		$call add (a ex1) (ex2)
		$call add (ex2 b) (r)
	}
	result :=  %p:r
}

$module [add] 
     $in (a $uint<10> b $uint<10>)
     $out(result $uint<10>)
$is
{
	result := (a + b)
}
