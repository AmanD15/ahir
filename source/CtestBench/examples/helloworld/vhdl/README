We have the following files present.
	system.vhdl  (generated as main_o_aa_vc.vhdl in the parent directory)
	vhdlCStubs.h
	vhdlCStubs.c

We will need to modify testbench.c a little..  The
following three lines will need to be added at the top.

#include <SocketLib.h>
#include <Vhpi.h>
#include <vhdlCStubs.h>


The first two are part of the AhirV2 distribution and
are responsible for connecting the software part of
the test setup to the VHDL simulator. The third was
generated by Aa2VC.

Now compile
gcc -c vhdlCStubs.c -I./ -I../../../include 
gcc -c testbench.c -I./ -I../../../include
gcc -o testbench testbench.o vhdlCStubs.o  -L../../../lib -lSocketLib -lpthread

OK.  you will now need to create a Modelsim project.
See the attached BasicCheck.mpf project file to see how.
(you will need to compile the file Vhpi_Package.vhdl to
get the Modelsim <-> C link configured).

Now start ./testbench 389 in one shell
(the 389 is just a random initial value given to foo bar and inpipe,
 after execution, foo and bar should both return the same value
 (389) and you should see 3 X 389 (1167) emerge from outpipe.)
and start the Modelsim simulation of work.test_system_test_bench
in another shell and you will see that everything runs great!



