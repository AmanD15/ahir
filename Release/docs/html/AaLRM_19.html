<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- XML file produced from file: AaLRM.tex
     using Hyperlatex v 2.9-in-waiting-rk (oct06) (c) Otfried Cheong
     on Emacs 22.2.1, Thu May 26 16:58:51 2011 -->
<head>
<title>Untitled -- Examples</title>

<style type="text/css">
.maketitle { align : center }
div.abstract { margin-left: 20%; margin-right: 10%; }
h3.abstract  { align : center }
div.verse, div.quote, div.quotation {
  margin-left : 10%; 
  margin-right : 10%;
}
dt {font-weight: bold}
</style>
</head>
<body>
<table width="100%" cellpadding="0" cellspacing="2"><tr>
<td bgcolor="#99ccff"><a href="AaLRM_20.html"><img border="0" alt="Syntax" src="file:/usr/share/hyperlatex/icons/next.png"/></a></td><td bgcolor="#99ccff"><a href="AaLRM.html"><img border="0" alt="Top" src="file:/usr/share/hyperlatex/icons/up.png"/></a></td><td bgcolor="#99ccff"><a href="AaLRM_18.html"><img border="0" alt="Foreign Modules" src="file:/usr/share/hyperlatex/icons/previous.png"/></a></td><td align="center" bgcolor="#99ccff" width="100%"><b>Examples</b></td></tr></table>
<h1>Examples</h1>
<p>Here is a very simple program
</p>
<pre>
// an array of 32-bit unsigned integers.
$storage mem: $array&lt;1024&gt; of $uint&lt;32&gt; 
$module [sel_mod]
   $in (a:$uint&lt;32&gt; b:$uint&lt;10&gt;)
   $out (c:$uint&lt;32&gt;)
$is
{
   t := (mem[b] + a)
   mem[b] := t
   c := t
}
</pre>
<p>This consists of a single module, which accumulates
a value into an array position.
</p>
<p>An example which is a little bit more complicated:
</p>
<pre>
// an array of 32-bit unsigned integers.
$storage mem:$array[1024] $of $uint&lt;32&gt;   

// module returns the sum of mem[I] from
// I=low to I=high
$module [sum_mod]
    $in (low:$uint&lt;10&gt; high:$uint&lt;10&gt;)
    $out (sum:$uint&lt;32&gt;)
$is
{
   d := (high-low)  
   mp := ((high-low)/2)

   $branchblock[trivcheck]
    {
       // d from parent scope
       $if (d &gt; 0) $then  
           // do two summations in parallel
           // parallel summations
           $parallelblock[parsum]
           {
               $branchblock[sb1]{
                    $storage  I:$uint&lt;10&gt;
                    $merge $entry loopback
                       $phi s := 0 $on $entry  s1 $on loopback
                    $endmerge
                    $if (I &lt; mp) $then
                       I := (I+1)
                       s1 := ($mux (I == 0)  0 (s + mem[I]))
                       $place [loopback]
                    $endif
               } 
               $branchblock[sb2]{
                    $storage  J:$uint&lt;10&gt;
                    J := (mp + 1)
                    $merge $entry loopback
                       $phi s := 0 $on $entry s1 $on loopback
                    $endmerge
                    $if (J &lt; high) $then
                         J := (J+1)
                         s1 := ($mux (J == (mp+1))  0 (s + mem[J]))
                         $place [loopback]
                    $endif
               } 
           }
 
           // combine results from parallel statement above
           snontriv := (%parsum%sb1:s  + %parsum%sb2:s)
           $place [nontrivsum]
      $else

           // summation is trivial 
           striv := mem[low]
           $place [trivsum]
      $endif
      $merge nontrivsum trivsum
         // which sum do you pick? depends on which path was taken
         $phi sum := snontriv $on nontrivsum striv $on trivsum
      $endmerge
    }
}
</pre> 
<p>This example describes an algorithm which computes the sum of
a section of an array by dividing the problem into two partial
summations. 
</p>
<hr />
<table width="100%" cellpadding="0" cellspacing="2"><tr>
<td bgcolor="#99ccff"><a href="AaLRM_20.html"><img border="0" alt="Syntax" src="file:/usr/share/hyperlatex/icons/next.png"/></a></td><td bgcolor="#99ccff"><a href="AaLRM.html"><img border="0" alt="Top" src="file:/usr/share/hyperlatex/icons/up.png"/></a></td><td bgcolor="#99ccff"><a href="AaLRM_18.html"><img border="0" alt="Foreign Modules" src="file:/usr/share/hyperlatex/icons/previous.png"/></a></td><td align="center" bgcolor="#99ccff" width="100%"><b>Examples</b></td></tr></table></body></html>
